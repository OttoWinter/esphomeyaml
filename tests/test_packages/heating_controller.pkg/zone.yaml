output:
  - platform: gpio
    id: "{{ pkg.params.zone_id }}_output"
    pin:
      number: "{{ pkg.params.relay_pin }}"
      mode: OUTPUT
      inverted: false

switch:
  - platform: output
    internal: "{{ pkg.params.expose_valves|not }}"
    name: "{{ pkg.params.zone_verbose_name }} valve"
    id: "{{ pkg.params.zone_id }}_valve"
    output: "{{ pkg.params.zone_id }}_output"

sensor:
  - platform: dallas
    address: "{{ pkg.params.sensor_address }}"
    dallas_id: dallas_hub0
    name: "{{ pkg.params.zone_verbose_name }} temperature"
    id: "{{ pkg.params.zone_id }}_temperature"

climate:
  - platform: bang_bang
    id: "{{ pkg.params.zone_id }}_controller"
    name: "{{ pkg.params.zone_verbose_name }}"
    sensor: "{{ pkg.params.zone_id }}_temperature"
    default_target_temperature_low: "{{ pkg.params.default_temperature|default(25) - 2 }}"
    default_target_temperature_high: "{{ pkg.params.default_temperature|default(25) + 2 }}"
    heat_action:
      - switch.turn_on: "{{ pkg.params.zone_id }}_valve"
    idle_action:
      - switch.turn_off: "{{ pkg.params.zone_id }}_valve"
    visual:
      min_temperature: 18
      max_temperature: 30
      temperature_step: 0.1
